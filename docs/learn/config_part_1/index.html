<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.46" />
    <meta name="description" content="the basics of how to pass options to your targets">
<meta name="author" content="Mac Heller-Ogden">

    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/images/favicon.png" type="image/x-icon" />
    <title>config - part 1 :: targets</title>
    
    
    <link href="/css/nucleus.css?1533485778" rel="stylesheet">
    <link href="/css/font-awesome.min.css?1533485778" rel="stylesheet">
    <link href="/css/hybrid.css?1533485778" rel="stylesheet">
    <link href="/css/featherlight.min.css?1533485778" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1533485778" rel="stylesheet">
    <link href="/css/auto-complete.css?1533485778" rel="stylesheet">
    <link href="/css/theme.css?1533485778" rel="stylesheet">
    <link href="/css/hugo-theme.css?1533485778" rel="stylesheet">
    
      <link href="/css/theme-targets.css?1533485778" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js?1533485778"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/learn/config_part_1/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg xmlns="http://www.w3.org/2000/svg" width="230" height="70" viewBox="0 0 1747 361">
<defs>
    <style>
      .cls-1 {
        fill: #376993;
      }

      .cls-1, .cls-2 {
        fill-rule: evenodd;
      }

      .cls-2 {
        fill: #93376f;
      }
    </style>
  </defs>
  <path id="targets" class="cls-1" d="M435.235,69.008H344.6V0.4H315V234.744a42.359,42.359,0,0,0,12.638,30.872q12.635,12.821,31.053,12.818h76.549V248.826H358.686A14.179,14.179,0,0,1,344.6,234.744V98.616h90.631V69.008Zm27.438,0V98.616H632.02A14.18,14.18,0,0,1,646.1,112.7v46.219H462.673v75.827a43.764,43.764,0,0,0,43.691,43.69H676.071V112.7a43.766,43.766,0,0,0-44.051-43.69H462.673Zm43.691,179.818a14.18,14.18,0,0,1-14.083-14.082V188.525H646.1v60.3H506.364Zm217.91-167A42.081,42.081,0,0,0,711.456,112.7V278.434h29.608V112.7a14.18,14.18,0,0,1,14.082-14.082H872.859V69.008H755.146A42.085,42.085,0,0,0,724.274,81.826ZM1105.39,112.7a42.374,42.374,0,0,0-12.64-30.872q-12.63-12.813-31.05-12.818H936.045a43.764,43.764,0,0,0-43.69,43.69V234.744a43.764,43.764,0,0,0,43.69,43.69H1075.78V317.07a14.173,14.173,0,0,1-14.08,14.082H930.99v29.97H1061.7q18.42,0,31.05-12.819a42.8,42.8,0,0,0,12.64-31.233V112.7ZM926.116,244.673a13.529,13.529,0,0,1-4.153-9.929V112.7a14.18,14.18,0,0,1,14.082-14.082H1061.7a14.175,14.175,0,0,1,14.08,14.082V234.744a14.175,14.175,0,0,1-14.08,14.082H936.045A13.533,13.533,0,0,1,926.116,244.673ZM1180.86,69.008a43.768,43.768,0,0,0-43.69,43.69V234.744a43.767,43.767,0,0,0,43.69,43.69h169.71V248.826H1180.86a14.175,14.175,0,0,1-14.08-14.082V188.525h183.79V112.7a42.11,42.11,0,0,0-12.82-30.872,42.535,42.535,0,0,0-31.24-12.818H1180.86Zm-14.08,43.69a14.175,14.175,0,0,1,14.08-14.082h125.65A14.192,14.192,0,0,1,1320.6,112.7v46.219H1166.78V112.7Zm341.21-43.69h-90.63V0.4h-29.61V234.744a42.357,42.357,0,0,0,12.64,30.872q12.63,12.821,31.05,12.818h76.55V248.826h-76.55a14.175,14.175,0,0,1-14.08-14.082V98.616h90.63V69.008Zm226.58,12.818a42.535,42.535,0,0,0-31.24-12.818H1577.68a43.751,43.751,0,0,0-43.69,43.69v32.137a43.75,43.75,0,0,0,43.69,43.69h125.65a14.175,14.175,0,0,1,14.08,14.082v32.137a14.175,14.175,0,0,1-14.08,14.082H1577.68a14.193,14.193,0,0,1-14.09-14.082v-2.889h-29.6v2.889a43.75,43.75,0,0,0,43.69,43.69h125.65a42.515,42.515,0,0,0,31.24-12.818,42.084,42.084,0,0,0,12.81-30.872V202.607a42.1,42.1,0,0,0-12.81-30.872,42.534,42.534,0,0,0-31.24-12.818H1577.68a14.193,14.193,0,0,1-14.09-14.082V112.7a14.192,14.192,0,0,1,14.09-14.082h125.65a14.175,14.175,0,0,1,14.08,14.082v2.889h29.97V112.7A42.1,42.1,0,0,0,1734.57,81.826Z"/>
  <path id=":_:" data-name=": :" class="cls-2" d="M-0.223,278.058H55.023V222.813H-0.223v55.245Zm0-209.426v55.607H55.023V68.632H-0.223ZM176.34,278.058h55.246V222.813H176.34v55.245Zm0-209.426v55.607h55.246V68.632H176.34Z"/>
</svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1533485778"></script>
<script type="text/javascript" src="/js/auto-complete.js?1533485778"></script>
<script type="text/javascript">
    
        var baseurl = '\/';
    
</script>
<script type="text/javascript" src="/js/search.js?1533485778"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/learn/" title="learn targets" class="dd-item 
        parent
        
        
        ">
      <a href="/learn/">
          <b>1. </b>learn targets
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/learn/background/" title="terminology and background" class="dd-item 
        
        
        
        ">
      <a href="/learn/background/">
          terminology and background
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/learn/prerequisites/" title="prerequisites" class="dd-item 
        
        
        
        ">
      <a href="/learn/prerequisites/">
          prerequisites
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/learn/installation/" title="installation" class="dd-item 
        
        
        
        ">
      <a href="/learn/installation/">
          installation
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/learn/hello_world/" title="hello world" class="dd-item 
        
        
        
        ">
      <a href="/learn/hello_world/">
          hello world
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/learn/config_part_1/" title="config - part 1" class="dd-item 
        parent
        active
        
        ">
      <a href="/learn/config_part_1/">
          config - part 1
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/learn/config_part_2/" title="config - part 2" class="dd-item 
        
        
        
        ">
      <a href="/learn/config_part_2/">
          config - part 2
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/learn/bindings/" title="bindings" class="dd-item 
        
        
        
        ">
      <a href="/learn/bindings/">
          bindings
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/learn/composition/" title="composition" class="dd-item 
        
        
        
        ">
      <a href="/learn/composition/">
          composition
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/learn/loaders/" title="loaders" class="dd-item 
        
        
        
        ">
      <a href="/learn/loaders/">
          loaders
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/learn/project_structure/" title="project structure" class="dd-item 
        
        
        
        ">
      <a href="/learn/project_structure/">
          project structure
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/learn/more/" title="more" class="dd-item 
        
        
        
        ">
      <a href="/learn/more/">
          more
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/learn/tty_mode/" title="tty-mode" class="dd-item 
        
        
        
        ">
      <a href="/learn/tty_mode/">
          tty-mode
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/extending_targets/" title="extending targets" class="dd-item 
        
        
        
        ">
      <a href="/extending_targets/">
          <b>2. </b>extending targets
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/extending_targets/operations/" title="operations" class="dd-item 
        
        
        
        ">
      <a href="/extending_targets/operations/">
          operations
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/machellerogden/targets"><i class='fa fa-fw fa-github'></i> Github repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="#ZgotmplZ"><i class='fa fa-fw fa-bullhorn'></i> Credits</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
       
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fa fa-fw fa-history"></i> Clear History</a></li>         
      
      </ul>
    </section>
    
    <section id="footer">
      <center>

    
    <a class="github-button" href="https://github.com/machellerogden/targets" data-icon="octicon-star" data-show-count="true" aria-label="Star machellerogden/targets on GitHub">Star</a>

    
    <a class="github-button" href="https://github.com/machellerogden/targets/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork machellerogden/targets on GitHub">Fork</a>

</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/machellerogden/targetslearn/config_part_1/_index.en.md" target="blank">
                      <i class="fa fa-code-fork"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>targets</a> > <a href='/learn/'>learn targets</a> > config - part 1
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">

    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>config - part 1</h1>
          

        


<div class="notices info" ><p>The examples in this section build on what you learned in the <a href="/learn/hello_world/">&ldquo;Hello, World!&rdquo; tutorial</a>. If you&rsquo;re new to targets, start there.</p>
</div>


<p>Let&rsquo;s make something a little more useful than hello world.</p>

<p>We&rsquo;ll reuse what you setup in the <a href="/learn/hello_world/">&ldquo;Hello, World!&rdquo; tutorial</a> but let&rsquo;s add a couple more dependencies.</p>

<pre><code>npm i weather-js mem
</code></pre>

<p>Now, copy this into your <code>index.js</code> file.</p>

<pre><code class="language-js">#!/usr/bin/env node
'use strict';

const { promisify } = require('util');
const mem = require('mem');
const weatherJs = require('weather-js');

const getWeather = mem((location) =&gt; promisify(weatherJs.find)({
    search: location,
    degreeType: 'F'
}));

const weatherSky = ({ location }) =&gt; getWeather(location)
        .then((r) =&gt; r[0].current.skytext);

weatherSky.label = &quot;Current Weather&quot;;

const weatherTemp = ({ location }) =&gt; getWeather(location)
        .then((r) =&gt; r[0].current.temperature);

weatherSky.label = &quot;Current Temperature&quot;;

require('targets')({
    targets: {
        'weather.sky': weatherSky,
        'weather.temp': weatherTemp
    }
});
</code></pre>

<p>If you register multiple targets to a given namespace, as we&rsquo;ve done above, they will share config.</p>

<p>You can now specify location as <code>--weather.location Chicago</code> for both <code>mycli weather.sky</code> and <code>mycli weather.temp</code>. For example:</p>

<pre><code>mycli weather.sky --weather.location Chicago
[Current Weather] Partly Sunny
mycli weather.temp --weather.location Chicago
[Current Temperature] 75
</code></pre>

<p>This is a good point at which to demonstrate how tasks can be composed, or run together. Consider the following.</p>

<pre><code>mycli weather.sky weather.temp --weather.location Chicago
[Current Weather] Partly Sunny
[Current Temperature] 75
</code></pre>

<p>We&rsquo;ll talk more about composition <a href="/learn/composition/">later</a>. For now, let&rsquo;s take a look at other ways config can be declared and provided to our targets.</p>

<p>Consider the following:</p>

<pre><code class="language-js">#!/usr/bin/env node
'use strict';

const { promisify } = require('util');
const mem = require('mem');
const weatherJs = require('weather-js');

const getWeather = mem((location) =&gt; promisify(weatherJs.find)({
    search: location,
    degreeType: 'F'
}));

const weatherSky = ({ location }) =&gt; getWeather(location)
        .then((r) =&gt; r[0].current.skytext);

weatherSky.label = &quot;Current Weather&quot;;

const weatherTemp = ({ location }) =&gt; getWeather(location)
        .then((r) =&gt; r[0].current.temperature);

weatherSky.label = &quot;Current Temperature&quot;;

const prompts = [
    {
        &quot;name&quot;: &quot;location&quot;,
        &quot;message&quot;: &quot;Where would you like to know about?&quot;,
        &quot;default&quot;: &quot;Chicago&quot;
    }
];

weatherSky.prompts = prompts;
weatherTemp.prompts = prompts;

require('targets')({
    targets: {
        'weather.sky': weatherSky,
        'weather.temp': weatherTemp
    }
});

</code></pre>

<p>In this example, we&rsquo;ve adding some prompts to our weather targets. By doing this, we are declaring what configuration our target requires in order to run, but we&rsquo;re doing so in way which will allow the system to ask for the needed input if it is not provided.</p>

<p>If we run the above with <code>mycli weather.sky weather.temp</code> and no additional arguments, Targets will detect that config is missing for these targets and you will be prompted.</p>

<p>The output will look something like this.</p>

<pre><code>mycli weather.sky weather.temp
? [weather.location] Where would you like to know about? Miami
[Current Temperature] Mostly Clear
[weather.temp] 83
</code></pre>

<div class="notices tip" ><p>Notice that even though you added these prompts to both of your targets, you only get prompted once. Each prompt is unique by name.</p>
</div>


<p>If the needed config is provided, the user will not be prompted, just as before.</p>

<pre><code>mycli weather.sky weather.temp --weather.location Chicago
[Current Weather] Partly Sunny
[Current Temperature] 75
</code></pre>

<blockquote>
<p>Targets calls this concept &ldquo;naive config&rdquo;. It gives the user the ability to use your target without knowing what config is needed because the target itself knows how to ask for it.</p>
</blockquote>

<p>All prompts are defined as <a href="https://www.npmjs.com/package/inquirer">inquirer</a> options. Check the inquirer docs to learn the various ways you&rsquo;ll be able to prompt for config.</p>

<p>Config in target goes much deeper than command-line arguments and prompts however. In the next section we&rsquo;ll explore some of the ways that targets handles config files.</p>

<p><em><strong>Next Up:</strong> <a href="/learn/config_part_2/">Config - Part 2</a></em></p>


<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/learn/hello_world/" title="hello world"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/learn/config_part_2/" title="config - part 2" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1533485778"></script>
    <script src="/js/perfect-scrollbar.min.js?1533485778"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1533485778"></script>
    <script src="/js/jquery.sticky.js?1533485778"></script>
    <script src="/js/featherlight.min.js?1533485778"></script>
    <script src="/js/html5shiv-printshiv.min.js?1533485778"></script>
    <script src="/js/highlight.pack.js?1533485778"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js?1533485778"></script>
    <script src="/js/learn.js?1533485778"></script>
    <script src="/js/hugo-learn.js?1533485778"></script>

    <link href="/mermaid/mermaid.css?1533485778" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1533485778"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>

</script>

  </body>
</html>
